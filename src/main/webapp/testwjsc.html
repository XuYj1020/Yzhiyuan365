<!-- 这是一个文件上传的测试 -->

<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script src="js/axios/dist/axios.js"></script>
		<script src="js/vue.js"></script>
		<script src="element-ui/lib/index.js"></script>
		<link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">
		<script src="element-china-area-data/dist/app.js"></script>
		
		<div id="app">
			<!-- <el-upload
			  class="upload-demo"
			  drag
			  action="http://localhost:8080/Yzhiyuan365/Registrationstatus/selectAll"
			  multiple>
			  <i class="el-icon-upload"></i>
			  <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
			  <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>
			</el-upload> -->
<!-- 			<form action="http://localhost:8080/Yzhiyuan365/test/SelectAll" method="post" enctype="multipart/form-data">
				<input type="text" name="name"/>
				<input type="text" name="text"/>
				<input type="file" name="file"/>
				<input type="submit"/>
			</form> -->
<!-- 			<el-form  status-icon  ref="ruleForm" label-width="100px" class="demo-ruleForm">
				<el-form-item label="上传图片" prop="imgs"> -->
					<!-- <el-upload
					  class="upload-demo"
					  drag
					  action="http://localhost:8080/Yzhiyuan365/test/SelectAll"
					  multiple
					  :on-success="success2"
					  >
					  <i class="el-icon-upload"></i>
					  <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
					  <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>
					</el-upload> -->
					
					<el-upload
					  class="upload-demo"
					  ref="upload"
					  action="http://localhost:8080/Yzhiyuan365/test/huodongtupian"
					  :on-preview="handlePreview"
					  :on-remove="handleRemove"
					  :file-list="fileList"
					  :auto-upload="false"
					  :limit="1"
					  :on-success = "handleSuccess"
					  accept="image/png,image/jpg,image/jpeg">
					  <el-button slot="trigger" size="small" type="primary">选取文件</el-button>
					  <el-button style="margin-left: 10px;" size="small" type="success" @click="submitUpload">上传到服务器</el-button>
					  <div slot="tip" class="el-upload__tip">只能上传jpg/png/jpeg文件，且不超过500kb</div>
					</el-upload>
						
				<!-- </el-form-item> -->
				<!-- <img :src="success"/> -->
				<!-- 这是通过tomcat映射后的引用地址 -->
				<!-- <img src="/Yzhiyuan365/upload/Snipaste_2023-02-28_19-15-09.png"/> -->
<!-- 				<img src="./upload/Snipaste_2023-02-28_19-15-09.png"/>
				<img src="/Yzhiyuan365/upload/Snipaste_2023-02-28_19-15-09.png"/> -->
				<!-- <img src="E:/code/ideaProjects/Yzhiyuan365/src/main/webapp/upload/Snipaste_2023-02-28_19-15-09.png"/> -->
<!-- 				<img :src="success"/>
				<img src="./upload/huodong/Snipaste_2022-12-20_14-58-17.png"/> -->
						 <!-- ./upload/huodong/Snipaste_2022-12-20_14-58-17.png -->
				<!-- <img src="./upload/huodong/Snipaste_2022-12-20_14-58-17.png"/> -->
				<img src="E:/Download/nginx-1.22.1/html/upload/huodong/1.png"/>
		</div>
		
		<script>
			new Vue({
				el:"#app",
				// data(){
				// 	return {
				// 		success:'',
				// 		ruleForm: {
				// 			imgs:[]
				// 		},
				// 		rules: {
				// 			imgs:[
				// 				{required: true, message: '请输入组织名称', trigger: 'blur'}
				// 				]
				// 		}
				// }
				// },
				// methods:{
				// 	  success2(res, file) {
				// 	      // 将服务器返回的文件url地址赋值给表单的success1，这样就可以在表单提交时将图片地址提交到服务器
				// 	      this.success = res
				// 		  console.log(res)
				// 		  // 
				// 		   console.log(res)
				// }
				// }
				
				 data() {
				      return {
				        fileList:[],
						photo:''
				      }
				    },
				    methods: {
				      submitUpload() {
				        this.$refs.upload.submit();
						
				      },
				      handleRemove(file, fileList) {
				        console.log(file, fileList);
				      },
				      handlePreview(file) {
				        console.log(file);
				      },
					  
					  handleSuccess(response, file, fileList) {
					  				// console.log("file",file);
					  				this.fileList = fileList;
					  				console.log(fileList);
					  				if (fileList.length >= 1) {
					  					this.uploadDisabled = true;
					  				}
					  				this.photo = file.response.data;
									console.log(response)
									console.log(file)
									console.log(response.data)
									// console.log(response.data)
									// console.log(file.response.data)
					  				this.$message({
					  					message: '上传成功！',
					  					type: 'success'
					  				});
				    }
					}
					
			})
		</script>
	</body>
</html>